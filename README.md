# Hydrological Analysis of Lakes

This project provides a web application for hydrological analysis of lakes using satellite data. It allows users to select a lake and perform an analysis, which includes calculating the average water level and detecting trends (rising, falling, or stable).

## Features

* **Lake Selection:** Choose a lake for analysis (e.g., Kisajno, Isąg).
* **Water Level Analysis:** Calculates the average water level over a defined period.
* **Trend Detection:** Identifies rising, falling, or stable water level trends.
* **Satellite Data Integration:** Utilizes Sentinel Hub for accessing satellite imagery.
* **Web Interface:** A simple web interface for triggering analyses and viewing results.

## Technologies Used

* Python
* Flask
* geopandas
* matplotlib
* numpy
* pandas
* scikit-learn
* scipy
* shapely
* scikit-image
* sentinelhub
* eolearn
* osmnx

## Installation

To set up the project locally, follow these steps:

### 1. Clone the Repository

git clone [https://github.com/ShiennG/LakeSat_Analytics.git](https://github.com/ShiennG/LakeSat_Analytics.git)
cd LakeSat_Analytics

### 2. Create a Virtual Environment (Recommended)
```Bash

python -m venv venv
source venv/bin/activate  # On Windows: `venv\Scripts\activate`
```
### 3. Install Dependencies
You'll need to install all the Python libraries listed in the Technologies Used section. It's recommended to create a requirements.txt file first.

First, identify all dependencies by looking at analiza.py and server.py. Based on the provided snippets, here's a preliminary list. You might need to add more if your full files use other libraries.

```Bash

# Create a requirements.txt file
cat << EOF > requirements.txt
Flask
geopandas
matplotlib
numpy
pandas
shapely
scikit-image
sentinelhub
eolearn.core
eolearn.features
eolearn.geometry
eolearn.io
osmnx
scikit-learn
scipy
gunicorn # Recommended for production deployment
EOF

pip install -r requirements.txt
```

### 4. Configure Sentinel Hub API Keys
The analiza.py script requires Sentinel Hub API credentials. You need to set config.sh_client_id and config.sh_client_secret in analiza.py. The provided snippet already has these set, but ensure they are your actual credentials if you're deploying this yourself.

```Python

# analiza.py
config = SHConfig()
config.sh_client_id = "YOUR_SENTINEL_HUB_CLIENT_ID" # Replace with your client ID
config.sh_client_secret = "YOUR_SENTINEL_HUB_CLIENT_SECRET" # Replace with your client secret
config.save()
```
Note: For security, it's best practice to load these credentials from environment variables rather than hardcoding them in the file, especially in a production environment.

## Usage
### 1. Run the Flask Server
The server.py file is a Flask application that serves the web interface and handles analysis requests.

```Bash

python server.py
The server will start, usually on http://127.0.0.1:5000/.
```

### 2. Access the Web Interface
Open your web browser and navigate to http://127.0.0.1:5000/.

### 3. Perform an Analysis
On the web interface, you should be able to select a lake (e.g., "Kisajno" or "Isąg"), country, period of time and initiate the analysis. The results, including the average water level, detected trends, and generated images, will be displayed.

## Project Structure

* server.py: The main Flask application that handles web requests and orchestrates the analysis.
* analiza.py: Contains the core hydrological analysis logic, including Sentinel Hub integration, water level calculation, and trend detection.
* static/: Directory for static files (e.g., images generated by the analysis).
* strona.html: The main HTML file for the web interface.
* style.css: The CSS file for styling the web interface.
* favicon.png: The favicon for the web application.

## Troubleshooting

* Missing API Keys: Ensure your config.sh_client_id and config.sh_client_secret in analiza.py are correctly set.
* Missing Dependencies: If you encounter ModuleNotFoundError, make sure all dependencies listed in requirements.txt are installed.
* Static Files Not Found: Ensure the static folder exists and server.py can create it if it doesn't.
* Analysis Errors: Check the server logs (output in your terminal where python server.py is running) for detailed error messages from the analiza.py script.

